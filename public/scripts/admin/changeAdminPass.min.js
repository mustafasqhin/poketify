const changePasswordForm='<form method="post" id="changePassword">\n<div class="title" id="info">Change Password</div>\n<div class="input-field">\n    <input type="text" id="username" name="username" data-name="Username" required>\n    <label for="username">New Username</label>\n</div>\n<div class="input-field">\n    <input type="password" id="oldPassword" name="oldPassword" data-name="Old Password" required>\n    <label for="oldPassword">Old Password</label>\n</div>\n<div class="input-field">\n    <input type="password" id="newPassword" name="newPassword" data-name="New Password" required>\n    <label for="newPassword">New Password</label>\n</div>\n<div class="input-field">\n    <input type="password" id="confirmPassword" name="confirmPassword" data-name="Comfirm Password" required>\n    <label for="confirmPassword">Confirm Password</label>\n</div>\n<button id="submit" class="button" type="submit">Change Password</button>\n<button id="cancelChangePassword" class="button">Cancel</button>\n</form>';function changeAdminPass(){const changePassword=document.getElementById("changePassword");changePassword.addEventListener("submit",e=>{e.preventDefault();const username=document.getElementById("username").value,oldPassword=document.getElementById("oldPassword").value,newPassword=document.getElementById("newPassword").value,confirmPassword=document.getElementById("confirmPassword").value;if(newPassword!==confirmPassword){const passwordLabel=document.querySelector("#confirmPassword + label");passwordLabel.style.color="#ff2121",passwordLabel.textContent="Passwords did not match",document.getElementById("confirmPassword").focus()}else fetch("/admin/changePassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:username,oldPassword:oldPassword,newPassword:newPassword})}).then(res=>{if(200===res.status)console.log("Password changed"),changePassword.classList.remove("active"),setTimeout(()=>{changePassword.remove()},500);else if(401===res.status){console.log("Password not changed");const passwordLabel=document.querySelector("#oldPassword + label");passwordLabel.style.color="#ff2121",passwordLabel.textContent="Password is incorrect",document.getElementById("oldPassword").focus()}else 403===res.status&&location.reload()})}),document.getElementById("cancelChangePassword").addEventListener("click",e=>{e.preventDefault();const changePassword=document.getElementById("changePassword");changePassword.classList.remove("active"),setTimeout(()=>{changePassword.remove()},500)});const inputFields=document.querySelectorAll(".input-field input");inputFields.forEach(input=>{input.addEventListener("input",e=>{const label=document.querySelector(`#${e.target.id} + label`);label.style.color="white",label.textContent=e.target.dataset.name})})}function changePassword(){document.getElementById("changePassword")||(document.body.insertAdjacentHTML("afterbegin",changePasswordForm),setTimeout(()=>{document.getElementById("changePassword").classList.add("active"),changeAdminPass()},100))}